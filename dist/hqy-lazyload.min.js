/* hqy-lazyload@v0.0.2 | https://github.com/Rockcookies/hqy-lazyload | A fast lightweight pure JavaScript script for lazy loading and multi-serving images, iframes, videos and more. */

!function(){function t(e){var r=n[e];return"object"==typeof r?r:(r.exports||(r.exports={},r.exports=r.call(r.exports,t,r.exports,r)||r.exports),r.exports)}function e(t,e){n[t]=e}var n={};e("./class.js",function(t,e,n){function r(t){this.init(t)}var o=t("./utils.js"),s=t("./defaults.js"),i=t("./dom.js"),a=t("./loadElement.js");n.exports=r;var l=window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI,c=function(t,e){t.bottom=(window.innerHeight||document.documentElement.clientHeight)+e,t.right=(window.innerWidth||document.documentElement.clientWidth)+e};o.assign(r.prototype,a,{init:function(t){t=t||{},this.options={};for(var e in s)this.options[e]=t[e]||s[e];this.initContext(),this.render()},initContext:function(){var t=this.options,e=this.context={attrSrc:"src",attrSrcset:"srcset",source:t.src,elements:[],container:i.toElements(t.container)[0]||!1,destroyed:!0,isRetina:l,viewport:{top:0-t.offset,left:0-t.offset},validateT:o.throttle(function(){this.validate()},t.validateDelay,this),saveViewportOffsetT:o.throttle(function(){c(e.viewport,t.offset)},t.validateDelay,this)};c(e.viewport,t.offset),o.each(t.breakpoints,function(t){if(t.width>=window.screen.width)return e.source=t.src,!1})},render:function(){var t=this.options,e=this.context;e.elements=i.toElements(t.elements),e.destroyed&&(e.destroyed=!1,e.container&&i.bindEvent(e.container,"scroll",e.validateT),i.bindEvent(window,"resize",e.saveViewportOffsetT),i.bindEvent(window,"resize",e.validateT),i.bindEvent(window,"scroll",e.validateT)),this.validate()},destroy:function(){this.options;var t=this.context;t.container&&i.unbindEvent(t.container,"scroll",t.validateT),i.unbindEvent(window,"scroll",t.validateT),i.unbindEvent(window,"resize",t.validateT),i.unbindEvent(window,"resize",t.saveViewportOffsetT),t.elements=[],t.destroyed=!0},validate:function(){var t=this.options,e=this.context,n=e.elements,r=n.length;o.each(n,function(n){if(!(i.hasClass(n,e.loadingClass)||i.hasClass(n,t.successClass)||i.hasClass(n,t.errorClass)))return this.elementInView(n)?(this.loadElement(n),void r--):void 0;r--},this),r<=0&&this.destroy()},elementInView:function(t){var e=this.options,n=this.context,r=n.viewport,s=n.container,i=t.getBoundingClientRect();if(s&&contains(s,t)){var a=s.getBoundingClientRect();if(inView(a,r)){var l=a.top-e.offset,c=a.right+e.offset,d=a.bottom+e.offset,u=a.left-e.offset,f={top:l>r.top?l:r.top,right:c<r.right?c:r.right,bottom:d<r.bottom?d:r.bottom,left:u>r.left?u:r.left};return o.inView(i,f)}return!1}return o.inView(i,r)},load:function(t,e){this.context.elements=i.toElements(t),o.each(t,function(t){this.loadElement(element,e)},this)}})}),e("./defaults.js",function(t,e,n){n.exports={root:document,container:!1,elements:".hqy-lazy",success:!1,error:!1,offset:100,separator:"|",loadingClass:"hqy-loading",successClass:"hqy-loaded",errorClass:"hqy-error",breakpoints:!1,loadInvisible:!1,validateDelay:25,saveViewportOffsetDelay:50,srcset:"data-srcset",src:"data-src"}}),e("./dom.js",function(t,e,n){var r=t("./utils.js"),o={},s=e.hasClass=function(t,n){return o[n]||(o[n]=new RegExp("(\\s|^)"+n+"(\\s|$)")),o[n].test(e.getAttr(t,"class")||"")&&o[n]};e.addClass=function(t,n){s(t,n)||t.setAttribute("class",(e.getAttr(t,"class")||"").trim()+" "+n)},e.removeClass=function(t,n){var r;(r=s(t,n))&&t.setAttribute("class",(e.getAttr(t,"class")||"").replace(r," "))},e.toElements=function(t){if(r.isString(t))return e.querySelectorAll(t);if(t&&t.length){for(var n=[],o=t.length;o--;n.unshift(t[o]));return n}return t?[t]:[]},e.querySelectorAll=function(t,e){if(document.querySelectorAll)e=document.querySelectorAll(t);else{var n=document,r=n.styleSheets[0]||n.createStyleSheet();r.addRule(t,"f:b");for(var o=n.all,s=0,i=[],a=o.length;s<a;s++)o[s].currentStyle.f&&i.push(o[s]);r.removeRule(0),e=i}return e},e.contains=function(t,e,n){if(t==e)return!0;if(!e||!e.nodeType||1!=e.nodeType)return!1;if(t.contains)return t.contains(e);if(t.compareDocumentPosition)return!!(16&t.compareDocumentPosition(e));for(var r=e.parentNode;r&&r!=n;){if(r==t)return!0;r=r.parentNode}return!1},e.setAttr=function(t,e,n){t.setAttribute(e,n)},e.getAttr=function(t,e){return t.getAttribute(e)},e.removeAttr=function(t,e){t.removeAttribute(e)},e.equal=function(t,e){return t.nodeName.toLowerCase()===e},e.bindEvent=function(t,e,n){t.attachEvent?t.attachEvent&&t.attachEvent("on"+e,n):t.addEventListener(e,n,{capture:!1,passive:!0})},e.unbindEvent=function(t,e,n){t.detachEvent?t.detachEvent&&t.detachEvent("on"+e,n):t.removeEventListener(e,n,{capture:!1,passive:!0})}}),e("./index.js",function(t,e,n){}),e("./loadElement.js",function(t,e,n){function r(t,e,n,r){var i=this,a=s.equal(t,"img"),l=e.split(n.separator),c=l[r.isRetina&&l.length>1?1:0],d=s.getAttr(t,n.srcset),u=t.parentNode,f=u&&s.equal(u,"picture");if(!a&&!o.isUndefined(t.src))return t.src=c,void this.loadElementSuccess(t);var h=new Image,v=function(){i.loadElementError(t,"invalid"),s.unbindEvent(h,"error",v),s.unbindEvent(h,"load",m)},m=function(){a?f||i.handleSrcsetElement(t,c,d):t.style.backgroundImage='url("'+c+'")',i.loadElementSuccess(t),s.unbindEvent(h,"error",v),s.unbindEvent(h,"load",m)};f&&(h=t,o.each(u.getElementsByTagName("source"),function(t){this.handleSourceElement(t,r.attrSrcset,n.srcset)},this)),s.addClass(t,n.loadingClass),s.bindEvent(h,"error",v),s.bindEvent(h,"load",m),this.handleSrcsetElement(h,c,d)}var o=t("./utils.js"),s=t("./dom.js");n.exports={handleSourceElement:function(t,e,n){var r=s.getAttr(t,n);r&&s.setAttr(t,e,r)},handleSrcsetElement:function(t,e,n){n&&s.setAttr(t,this.context.attrSrcset,n),t.src=e},loadElementSuccess:function(t){var e=this.options;s.addClass(t,e.successClass),s.removeClass(t,e.loadingClass),e.success&&e.success(t)},loadElementError:function(t,e){var n=this.options;n.error&&n.error(t,e),s.addClass(t,n.errorClass),s.removeClass(t,n.loadingClass)},loadElement:function(t,e){var n=this.options,i=this.context;if(e||n.loadInvisible||t.offsetWidth>0&&t.offsetHeight>0){var a=s.getAttr(t,i.source)||s.getAttr(t,n.src);a?r.call(this,t,a,n,i):(s.addClass(t,n.loadingClass),s.equal(t,"video")?(o.each(t.getElementsByTagName("source"),function(t){this.handleSourceElement(t,i.attrSrc,n.src)},this),t.load(),this.loadElementSuccess(t)):this.loadElementError(t,"missing"))}}}}),e("./utils.js",function(t,e,n){var r=e.hasOwnProperty=Object.prototype.hasOwnProperty,o=e.toString=Object.prototype.toString,s=e.each=function(t,e,n){if(t&&e)for(var r=t.length,o=0;o<r&&!1!==e.call(n,t[o],o);o++);};e.assign=function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];if(null!=n)for(var o in n)r.call(n,o)&&(t[o]=n[o])}return t},e.isUndefined=function(t){return void 0===t};var i=["Arguments","Function","String","Number","Date","RegExp","Error"];Array.isArray?e.isArray=Array.isArray:i.push("Array"),s(i,function(t){e["is"+t]=function(e){return o.call(e)==="[object "+t+"]"}}),e.throttle=function(t,e,n){var r=0;return function(){var o=+new Date;o-r<e||(r=o,t.apply(n,arguments))}},e.inView=function(t,e){return t.right>=e.left&&t.bottom>=e.top&&t.left<=e.right&&t.top<=e.bottom}}),"function"==typeof define&&define.amd?define(t("./index.js")):"object"==typeof exports?module.exports=t("./index.js"):window.HqyLazyload=t("./index.js")}();